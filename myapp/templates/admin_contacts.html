{% extends "base.html" %}

{% block content %}

<a href="{{ url_for('admin_login') }}">ログイン画面に戻る</a>
<a href="{{ url_for('admin_dashboard') }}">ダッシュボードに戻る</a>

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% set category, message = messages[messages|length-1] %}
<div class="notification is-{{ category }}">
    {{ message }}
</div>
{% endif %}
{% endwith %}
<div class="container">

    <h1>お問い合わせ一覧</h1>
    <div class="list-group">
        {% for contact in contacts %}
            <a href="{{ url_for('reply_contact', contact_id=contact.id) }}" class="list-group-item list-group-item-action">
                <strong>{{ contact.name }}</strong> ({{ contact.email }})
                <p>{{ contact.message[:100] }}...</p>
                <small>{{ contact.created_at }}</small>
            </a>
        {% endfor %}
    </div>
</div>
{% endblock %}
