{% extends "base.html" %}

{% block content %}
<h1>ユーザー詳細</h1>
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% set category, message = messages[messages|length-1] %}
<div class="notification is-{{ category }}">
    {{ message }}
</div>
{% endif %}
{% endwith %}
<a href="{{ url_for('admin_login') }}">ログイン画面に戻る</a>
<a href="{{ url_for('admin_dashboard') }}">ダッシュボードに戻る</a>
<a href="{{ url_for('admin_users') }}">ユーザー一覧に戻る</a>

<form action="{{ url_for('admin_user_detail', user_id=user.id) }}" method="post">
    <p>ID: {{ user.id }}</p>
    <p>ユーザー名: <input type="text" name="username" value="{{ user.username or '' }}"></p>
    <p>表示名: <input type="text" name="display_name" value="{{ user.display_name or '' }}"></p>
    <p>年齢: <input type="number" name="age" value="{{ user.age or '' }}"></p>
    <p>性別: <input type="text" name="gender" value="{{ user.gender or '' }}"></p>
    <p>最寄り駅: <input type="text" name="nearest_station" value="{{ user.nearest_station or '' }}"></p>
    <p>経験年数: <input type="number" name="experience_years" value="{{ user.experience_years or '' }}"></p>
    <p>学歴: <input type="text" name="education" value="{{ user.education or '' }}"></p>
    <p>管理者: <input type="checkbox" name="is_admin" value="true" {% if user.is_admin %}checked{% endif %}></p>
    <button type="submit">保存</button>
</form>

{% if latest_active_url %}
    <p>最新の有効なスキルシートのリンク: <a href="{{ latest_active_url }}">{{ latest_active_url }}</a></p>
{% else %}
    <p>有効なスキルシートのリンクはありません。</p>
{% endif %}

<a href="{{ url_for('admin_users') }}">戻る</a>
{% endblock %}
